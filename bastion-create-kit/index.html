<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>1ë‹¨ê³„: Bastion VM ìƒì„±ê¸°</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { padding-top: 4.5rem; background-color: #f4f4f4; }
        .container { max-width: 800px; }
        .card { margin-bottom: 1.5rem; }
        .card-header { font-weight: bold; }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">ğŸš€ 1ë‹¨ê³„: RHEL 9.6 Bastion VM ìƒì„±</a>
        </div>
    </nav>

    <main class="container">
        {% with messages = get_flashed_messages(with_categories=true) %}
          {% if messages %}
            {% for category, message in messages %}
              <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
                {{ message }}
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
              </div>
            {% endfor %}
          {% endif %}
        {% endwith %}

        <!-- 0ë‹¨ê³„ -->
        <div class="card">
            <div class="card-header">0ë‹¨ê³„: ë‹¤ìš´ë¡œë“œ ë§í¬ ì¤€ë¹„</div>
            <div class="card-body">
                <p class="card-text">
                    ì•„ë˜ ë²„íŠ¼ì„ ëˆŒëŸ¬ Red Hat ë‹¤ìš´ë¡œë“œ í˜ì´ì§€ë¥¼ ìƒˆ íƒ­ì—ì„œ ì—½ë‹ˆë‹¤. ë¡œê·¸ì¸ í›„,
                    <b>"Red Hat Enterprise Linux 9.6 Binary DVD"</b>ì˜ ë‹¤ìš´ë¡œë“œ ë§í¬ ì£¼ì†Œë¥¼ ë³µì‚¬í•˜ì„¸ìš”.
                </p>
                <a href="https://access.redhat.com/downloads/content/rhel" target="_blank" class="btn btn-info">Red Hat ë‹¤ìš´ë¡œë“œ í˜ì´ì§€ ì—´ê¸°</a>
            </div>
        </div>

        <!-- 1ë‹¨ê³„ Form -->
        <form method="post">
            <div class="card">
                <div class="card-header">1ë‹¨ê³„: RHEL 9.6 ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ</div>
                <div class="card-body">
                    <div class="mb-3">
                        <label for="iso_url_from_user" class="form-label">ë³µì‚¬í•œ ë‹¤ìš´ë¡œë“œ ë§í¬ ë¶™ì—¬ë„£ê¸°</label>
                        <input type="url" class="form-control" id="iso_url_from_user" name="iso_url_from_user" placeholder="https://access.cdn.redhat.com/..." required>
                        <div class="form-text">0ë‹¨ê³„ì—ì„œ ë³µì‚¬í•œ ì„ì‹œ ë‹¤ìš´ë¡œë“œ ë§í¬ë¥¼ ì—¬ê¸°ì— ë¶™ì—¬ë„£ìœ¼ì„¸ìš”.</div>
                    </div>
                    <button type="submit" name="action" value="download_iso" class="btn btn-primary">ë¶™ì—¬ë„£ì€ ë§í¬ë¡œ ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ</button>
                </div>
            </div>
        </form>
        
        <!-- 2ë‹¨ê³„ Form -->
        <form method="post">
            <div class="card">
                <div class="card-header">2ë‹¨ê³„: Kickstart íŒŒì¼ ìƒì„±</div>
                <div class="card-body">
                    <div class="mb-3">
                        <label for="root_password" class="form-label">Root ë¹„ë°€ë²ˆí˜¸</label>
                        <input type="password" class="form-control" id="root_password" name="root_password" placeholder="#ëŠ” ì£¼ì„ìœ¼ë¡œ ì²˜ë¦¬ë˜ë¯€ë¡œ ì‚¬ìš©ê¸ˆì§€" required>
                    </div>
                    <div class="mb-3">
                        <label for="hostname" class="form-label">VM í˜¸ìŠ¤íŠ¸ëª…</label>
                        <input type="text" class="form-control" id="hostname" name="hostname" placeholder="bastion.example.com" required>
                    </div>
                    <div class="mb-3">
                        <label for="http_server_ip_step2" class="form-label">í˜¸ìŠ¤íŠ¸(HTTP) ì„œë²„ IP</label>
                        <input type="text" class="form-control" id="http_server_ip_step2" name="http_server_ip" placeholder="ì˜ˆ: 10.0.1.103" required>
                        <div class="form-text">Kickstart ì„¤ì¹˜ì— ì‚¬ìš©í•  í˜¸ìŠ¤íŠ¸ì˜ IP ì£¼ì†Œì…ë‹ˆë‹¤.</div>
                    </div>
                    <button type="submit" name="action" value="generate_kickstart" class="btn btn-success">Kickstart íŒŒì¼ ìƒì„±</button>
                </div>
            </div>
        </form>

        <!-- 3ë‹¨ê³„ Form -->
        <form method="post">
            <div class="card">
                <div class="card-header">3ë‹¨ê³„: Bastion VM ìƒì„±</div>
                <div class="card-body">
                    <!--  [ìˆ˜ì •] vCPUs, RAM, Disk Size ë“œë¡­ë‹¤ìš´ ì¶”ê°€ -->
		    <div class="mb-3">
			<label for="vm_name" class="form-lable">Bastion VM ì´ë¦„</label> 
			<input type="text" class="form-control" id="vm_name" name="vm_name" placeholder="VMì˜ ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”" required>
		    </div>
                    <div class="mb-3">
                        <label for="vm_vcpus" class="form-label">vCPUs</label>
                        <select class="form-select" id="vm_vcpus" name="vm_vcpus">
                            <!-- JavaScriptê°€ ì˜µì…˜ì„ ì±„ì›ë‹ˆë‹¤. -->
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="vm_ram" class="form-label">RAM (GB)</label>
                        <select class="form-select" id="vm_ram" name="vm_ram">
                            <!-- JavaScriptê°€ ì˜µì…˜ì„ ì±„ì›ë‹ˆë‹¤. -->
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="disk_size" class="form-label">Disk Size</label>
                        <select class="form-select" id="disk_size" name="disk_size">
                            <!-- JavaScriptê°€ ì˜µì…˜ì„ ì±„ì›ë‹ˆë‹¤. -->
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="http_server_ip_step3" class="form-label">í˜¸ìŠ¤íŠ¸(HTTP) ì„œë²„ IP</label>
                        <input type="text" class="form-control" id="http_server_ip_step3" name="http_server_ip" placeholder="Kickstart íŒŒì¼ ìƒì„± ì‹œ ì‚¬ìš©í•œ IPì™€ ë™ì¼" required>
                        <div class="form-text">VM ìƒì„±ì— ì‚¬ìš©í•  í˜¸ìŠ¤íŠ¸ì˜ IP ì£¼ì†Œë¥¼ ì…ë ¥í•˜ì„¸ìš”.</div>
                    </div>
                    <button type="submit" name="action" value="create_vm" class="btn btn-danger">Bastion VM ìƒì„± ì‹œì‘</button>
                </div>
            </div>
        </form>
    </main>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <!--  [ìˆ˜ì •] ë“œë¡­ë‹¤ìš´ ì˜µì…˜ì„ ë™ì ìœ¼ë¡œ ìƒì„±í•˜ëŠ” ìŠ¤í¬ë¦½íŠ¸ ì¶”ê°€ -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const vcpuSelect = document.getElementById('vm_vcpus');
            for (let i = 1; i <= 64; i++) {
                const option = new Option(i, i);
                if (i === 8) option.selected = true; // ê¸°ë³¸ê°’ 8
                vcpuSelect.add(option);
            }

            const ramSelect = document.getElementById('vm_ram');
            for (let i = 2; i <= 64; i++) {
                const option = new Option(`${i} GB`, i);
                if (i === 16) option.selected = true; // ê¸°ë³¸ê°’ 16
                ramSelect.add(option);
            }

            const diskSelect = document.getElementById('disk_size');
            for (let i = 100; i <= 2000; i += 100) {
                let label = `${i} GB`;
                if (i >= 1000) {
                    label = `${i / 1000} TB`;
                }
                const option = new Option(label, i);
                if (i === 500) option.selected = true; // ê¸°ë³¸ê°’ 500
                diskSelect.add(option);
            }
        });
    </script>
</body>
</html>
